{%- extends 'layout.html' -%}
{%- block content -%}

{%- for post in posts -%}

	<div class="post">
		<div class="post-subject">
			{{post.subject}}
		</div>
		<div class="post-created">
			<a href="/{{post.key().id()}}" title="Permalink">
				<img class="icon" src="static/img/link.svg" alt="permalink">
			</a>
			{%- if user.name == post.user.name -%}
				<a href="/" title="Edit">
					<img class="icon" src="static/img/edit.svg">
				</a>
				<a href="/" title="Delete">
					<img class="icon" src="static/img/delete.svg">
				</a>
			{%- else -%}
				<a href="{{post.upvote()}}" title="Like">
					<img class="icon" src="static/img/up.svg">
				</a>
				<a href="/" title="Dislike">
					<img class="icon" src="static/img/down.svg">
				</a>
			{%- endif -%}
			{{post.created.strftime('%d/%m/%Y %H:%M')}} by {{post.user.name}} - {{post.votes}} votes
			<div class="link-comments">
				{%- if post.comments.count() > 0 -%}
					<a href="/{{post.key().id()}}">See {{post.comments.count()}}
					{%- if post.comments.count() == 1 -%}
						&nbsp;comment</a>
					{%- else -%}
						&nbsp;comments</a>
					{%- endif -%}
				{%- endif -%}
			</div>
		</div>
		<div class="post-content">
			{{post.text() | safe}}
		</div>
	</div>

{%- endfor -%}

{%- endblock -%}
